<!DOCTYPE html><html lang="es"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Competencias Docentes en IA</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #5D5CDE;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
        }

        .author-info {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #5D5CDE;
        }

        .author-info h4 {
            color: #5D5CDE;
            margin-bottom: 10px;
        }

        .competency-definition {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
        }

        .competency-definition h4 {
            color: #28a745;
            margin-bottom: 10px;
        }

        .competency-definition p {
            text-align: justify;
            line-height: 1.7;
        }

        .disclaimer {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }

        .disclaimer strong {
            color: #856404;
        }

        .test-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        .section-header {
            background: linear-gradient(135deg, #5D5CDE, #764ba2);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 1.3rem;
            font-weight: bold;
        }

        .question {
            margin-bottom: 25px;
            padding: 20px;
            border-left: 4px solid #5D5CDE;
            background: #f8f9ff;
            border-radius: 8px;
        }

        .question h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .option:hover {
            border-color: #5D5CDE;
            background: #f0f0ff;
        }

        .option.selected {
            border-color: #5D5CDE;
            background: #5D5CDE;
            color: white;
        }

        .option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #5D5CDE;
            color: white;
        }

        .btn-primary:hover {
            background: #4a4bc9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #5D5CDE, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .hidden {
            display: none !important;
        }

        .results-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .score-summary {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #5D5CDE, #764ba2);
            color: white;
            border-radius: 15px;
        }

        .score-summary h2 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .score-summary .percentage {
            font-size: 4rem;
            font-weight: bold;
            margin: 20px 0;
        }

        .level-explanation {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #5D5CDE;
        }

        .level-explanation h4 {
            color: #5D5CDE;
            margin-bottom: 15px;
        }

        .level-explanation p {
            margin-bottom: 15px;
            text-align: justify;
            line-height: 1.6;
        }

        .chart-container {
            margin: 30px 0;
            height: 400px;
            position: relative;
            background: white;
            border-radius: 10px;
            padding: 20px;
        }

        .dimension-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .dimension-card {
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #5D5CDE;
            background: #f8f9ff;
        }

        .dimension-name {
            font-weight: bold;
            color: #5D5CDE;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .dimension-description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .dimension-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .dimension-fill {
            height: 100%;
            background: linear-gradient(90deg, #5D5CDE, #764ba2);
            border-radius: 10px;
            transition: width 1s ease;
        }

        .recommendations {
            margin-top: 40px;
        }

        .rec-section {
            margin-bottom: 30px;
            padding: 25px;
            border-radius: 10px;
            background: #f8f9ff;
        }

        .rec-section h3 {
            color: #5D5CDE;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .rec-explanation {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-style: italic;
            color: #666;
        }

        .rec-list {
            list-style: none;
        }

        .rec-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            line-height: 1.5;
        }

        .rec-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #5D5CDE;
            font-weight: bold;
        }

        .pdf-header {
            background: white;
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #5D5CDE;
            margin-bottom: 20px;
        }

        .pdf-title {
            color: #5D5CDE;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .pdf-subtitle {
            color: #666;
            font-size: 14px;
        }

        /* Loading spinner - Solo visible cuando se activa espec√≠ficamente */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .loading-overlay.show {
            display: flex;
        }

        .loading-spinner {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #5D5CDE;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
        }

        @media print {
            body {
                background: white;
            }
            .container {
                max-width: 100%;
                margin: 0;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- P√°gina de Inicio -->
        <div id="intro-page">
            <div class="header">
                <h1>Test de Competencias Docentes en IA</h1>
                <p>Evaluaci√≥n integral de competencias en Inteligencia Artificial para educadores</p>
            </div>
            
            <div class="test-card">
                <div class="author-info">
                    <h4>Informaci√≥n del Test</h4>
                    <p><strong>Realizado por:</strong> Prof. Pedro Figueroa con la asistencia de herramientas de IA</p>
                    <p><strong>Basado en:</strong> AI competency framework for teachers (UNESCO, 2024)</p>
                </div>

                <div class="competency-definition">
                    <h4>¬øQu√© entendemos por Competencia Docente?</h4>
                    <p>
                        Una competencia docente es la <strong>capacidad compleja e integrada</strong> que combina conocimientos, habilidades, actitudes y valores para desempe√±ar eficazmente la labor educativa en contextos espec√≠ficos. Va <strong>m√°s all√° del dominio instrumental</strong> de herramientas o t√©cnicas, abarcando la capacidad de <strong>reflexionar cr√≠ticamente</strong>, <strong>tomar decisiones informadas</strong>, <strong>adaptar pr√°cticas pedag√≥gicas</strong> y <strong>promover el aprendizaje significativo</strong> de todos los estudiantes. 
                        En el contexto de la IA, las competencias docentes incluyen no solo saber usar tecnolog√≠as, sino comprenderlas √©ticamente, integrarlas pedag√≥gicamente y formar ciudadanos digitales responsables.
                    </p>
                </div>

                <div class="disclaimer">
                    <strong>Aclaraci√≥n importante:</strong> Los resultados que se obtengan ser√°n solo de referencia con fines orientativos, y no implican ni representan una valoraci√≥n excluyente de las competencias de cada usuario.
                </div>
                
                <h2>Instrucciones</h2>
                <p>Este test eval√∫a sus competencias actuales en el uso de la Inteligencia Artificial en el √°mbito educativo seg√∫n el marco de UNESCO. El test consta de <strong>30 preguntas</strong> organizadas en 5 aspectos fundamentales:</p>
                
                <ul style="margin: 20px 0; padding-left: 30px;">
                    <li><strong>Mentalidad Centrada en el Ser Humano:</strong> Eval√∫a su comprensi√≥n sobre la agencia humana y responsabilidad social en el uso de IA</li>
                    <li><strong>√âtica de la IA:</strong> Mide su conocimiento sobre principios √©ticos y uso responsable de tecnolog√≠as de IA</li>
                    <li><strong>Fundamentos y Aplicaciones de IA:</strong> Eval√∫a su comprensi√≥n t√©cnica b√°sica y habilidades de aplicaci√≥n</li>
                    <li><strong>Pedagog√≠a con IA:</strong> Mide su capacidad para integrar IA en procesos de ense√±anza y aprendizaje</li>
                    <li><strong>IA para Desarrollo Profesional:</strong> Eval√∫a c√≥mo utiliza IA para su crecimiento profesional continuo</li>
                </ul>
                
                <p><strong>Tiempo estimado:</strong> 25-30 minutos</p>
                <p><strong>Niveles de competencia:</strong> B√°sico (Adquirir), Intermedio (Profundizar), Avanzado (Crear)</p>
                <p>Responda con honestidad para obtener una evaluaci√≥n precisa de sus fortalezas y √°reas de mejora.</p>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" onclick="startTest()">Comenzar Test</button>
                </div>
            </div>
        </div>

        <!-- Test Interactivo -->
        <div id="test-page" class="hidden">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <div class="test-card">
                <div id="current-section"></div>
            </div>
            
            <div class="navigation">
                <button class="btn btn-secondary" id="prev-btn" onclick="previousSection()">Anterior</button>
                <span id="section-indicator"></span>
                <button class="btn btn-primary" id="next-btn" onclick="nextSection()">Siguiente</button>
            </div>
        </div>

        <!-- P√°gina de Resultados -->
        <div id="results-page" class="hidden">
            <div class="results-container" id="results-content">
                <div class="pdf-header" style="display: none;" id="pdf-header">
                    <div class="pdf-title">Informe de Competencias Docentes en IA</div>
                    <div class="pdf-subtitle">Prof. Pedro Figueroa | Basado en Marco UNESCO 2024</div>
                </div>

                <div class="score-summary">
                    <h2>Sus Resultados de Competencias en IA</h2>
                    <div class="percentage" id="total-score">0%</div>
                    <div id="level-indicator"></div>
                </div>

                <div class="level-explanation" id="level-explanation"></div>

                <div class="chart-container">
                    <canvas id="competencyChart"></canvas>
                </div>

                <h3 style="color: #5D5CDE; margin: 30px 0 20px 0;">An√°lisis Detallado por Aspecto</h3>
                <div class="dimension-scores" id="dimension-scores"></div>

                <div class="recommendations">
                    <div class="rec-section">
                        <h3>üéØ Fortalezas Identificadas</h3>
                        <div class="rec-explanation" id="strengths-explanation"></div>
                        <ul class="rec-list" id="strengths-list"></ul>
                    </div>

                    <div class="rec-section">
                        <h3>üìà √Åreas de Mejora</h3>
                        <div class="rec-explanation" id="improvements-explanation"></div>
                        <ul class="rec-list" id="improvements-list"></ul>
                    </div>

                    <div class="rec-section">
                        <h3>üöÄ Recomendaciones Inmediatas (1-3 meses)</h3>
                        <div class="rec-explanation" id="immediate-explanation"></div>
                        <ul class="rec-list" id="immediate-rec"></ul>
                    </div>

                    <div class="rec-section">
                        <h3>üéØ Recomendaciones Mediano Plazo (3-6 meses)</h3>
                        <div class="rec-explanation" id="medium-explanation"></div>
                        <ul class="rec-list" id="medium-rec"></ul>
                    </div>

                    <div class="rec-section">
                        <h3>üèÜ Recomendaciones Largo Plazo (6-12 meses)</h3>
                        <div class="rec-explanation" id="long-explanation"></div>
                        <ul class="rec-list" id="long-rec"></ul>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px; page-break-inside: avoid;">
                    <button class="btn btn-primary" onclick="downloadPDF()">Descargar Informe PDF</button>
                    <button class="btn btn-secondary" onclick="restartTest()" style="margin-left: 15px;">Reiniciar Test</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Generando su informe PDF...</p>
            <p style="font-size: 14px; color: #666;">Esto puede tomar unos segundos</p>
        </div>
    </div>

    <script>
        // Datos del test con preguntas corregidas ortogr√°ficamente
        const testData = {
            sections: [
                {
                    title: "Mentalidad Centrada en el Ser Humano",
                    questions: [
                        {
                            id: 1,
                            text: "¬øCu√°l considera que es el rol m√°s apropiado de los humanos en relaci√≥n con los sistemas de IA educativa?",
                            type: "radio",
                            options: [
                                { text: "Supervisar ocasionalmente para detectar errores t√©cnicos", value: 2 },
                                { text: "Mantener control total sobre cada decisi√≥n que tome la IA", value: 3 },
                                { text: "Colaborar activamente definiendo objetivos, monitoreando y ajustando seg√∫n contexto", value: 5 },
                                { text: "Confiar en las recomendaciones autom√°ticas con revisi√≥n m√≠nima", value: 1 },
                                { text: "Delegar decisiones operativas pero mantener responsabilidad final", value: 4 }
                            ]
                        },
                        {
                            id: 2,
                            text: "¬øC√≥mo deber√≠a abordarse la autonom√≠a de los estudiantes cuando se utilizan sistemas de IA en el aprendizaje?",
                            type: "radio",
                            options: [
                                { text: "Los estudiantes deben seguir las recomendaciones de IA sin cuestionarlas", value: 1 },
                                { text: "Permitir que los estudiantes elijan si usar o no las sugerencias de IA", value: 3 },
                                { text: "Ense√±ar a los estudiantes a evaluar cr√≠ticamente las recomendaciones de IA", value: 5 },
                                { text: "Usar IA solo para tareas que no afecten el pensamiento cr√≠tico", value: 2 },
                                { text: "Alternar entre uso de IA y m√©todos tradicionales seg√∫n la materia", value: 4 }
                            ]
                        },
                        {
                            id: 3,
                            text: "¬øQu√© nivel de transparencia considera necesario al usar herramientas de IA en el aula?",
                            type: "radio",
                            options: [
                                { text: "Informar solo cuando los estudiantes pregunten espec√≠ficamente", value: 2 },
                                { text: "Explicar que se usa IA pero sin detalles t√©cnicos", value: 3 },
                                { text: "Describir c√≥mo funciona la IA y c√≥mo influye en las decisiones pedag√≥gicas", value: 5 },
                                { text: "Mantener el uso de IA transparente solo para colegas, no estudiantes", value: 1 },
                                { text: "Explicar los beneficios de la IA pero no sus limitaciones", value: 4 }
                            ]
                        },
                        {
                            id: 4,
                            text: "¬øCu√°l considera que es su responsabilidad principal como educador en la era de la IA?",
                            type: "radio",
                            options: [
                                { text: "Mantenerse actualizado con las √∫ltimas herramientas de IA", value: 3 },
                                { text: "Formar estudiantes capaces de trabajar efectivamente con IA", value: 4 },
                                { text: "Desarrollar pensamiento cr√≠tico sobre el impacto social de la IA", value: 5 },
                                { text: "Proteger a los estudiantes del uso excesivo de tecnolog√≠a", value: 2 },
                                { text: "Integrar IA de manera que mejore la eficiencia del aprendizaje", value: 1 }
                            ]
                        },
                        {
                            id: 5,
                            text: "¬øC√≥mo ve el equilibrio entre automatizaci√≥n y interacci√≥n humana en la educaci√≥n?",
                            type: "radio",
                            options: [
                                { text: "La automatizaci√≥n deber√≠a usarse principalmente para tareas administrativas", value: 3 },
                                { text: "Un balance donde la IA potencia pero no reemplaza la interacci√≥n humana", value: 5 },
                                { text: "M√°xima automatizaci√≥n para permitir que los docentes se enfoquen en casos complejos", value: 2 },
                                { text: "Interacci√≥n humana como prioridad, IA solo como herramienta de apoyo", value: 4 },
                                { text: "Automatizaci√≥n gradual seg√∫n la madurez de los estudiantes", value: 1 }
                            ]
                        },
                        {
                            id: 6,
                            text: "¬øQu√© impacto social de la IA en educaci√≥n considera m√°s relevante para abordar?",
                            type: "radio",
                            options: [
                                { text: "El riesgo de dependencia tecnol√≥gica en los estudiantes", value: 4 },
                                { text: "La posible ampliaci√≥n de brechas educativas entre diferentes grupos", value: 5 },
                                { text: "El cambio en las habilidades requeridas para el mercado laboral", value: 3 },
                                { text: "La p√©rdida potencial de habilidades de escritura y c√°lculo manual", value: 2 },
                                { text: "El costo econ√≥mico de implementar tecnolog√≠as avanzadas", value: 1 }
                            ]
                        }
                    ]
                },
                {
                    title: "√âtica de la IA",
                    questions: [
                        {
                            id: 7,
                            text: "¬øC√≥mo deber√≠a manejar una situaci√≥n donde una herramienta de IA muestra resultados que podr√≠an favorecer a ciertos grupos de estudiantes?",
                            type: "radio",
                            options: [
                                { text: "Continuar usando la herramienta pero complementar con m√©todos alternativos", value: 3 },
                                { text: "Investigar la causa, documentar el sesgo y buscar alternativas", value: 5 },
                                { text: "Ajustar manualmente los resultados para equilibrar las diferencias", value: 2 },
                                { text: "Informar a la administraci√≥n y esperar orientaci√≥n institucional", value: 4 },
                                { text: "Suspender temporalmente el uso hasta recibir una versi√≥n actualizada", value: 1 }
                            ]
                        },
                        {
                            id: 8,
                            text: "¬øCu√°l considera la pr√°ctica m√°s apropiada para el manejo de datos estudiantiles con herramientas de IA?",
                            type: "radio",
                            options: [
                                { text: "Usar solo datos agregados sin informaci√≥n personal identificable", value: 4 },
                                { text: "Obtener consentimiento expl√≠cito y usar datos m√≠nimos necesarios", value: 5 },
                                { text: "Confiar en las pol√≠ticas de privacidad de las plataformas comerciales", value: 1 },
                                { text: "Anonimizar todos los datos antes de ingresarlos al sistema", value: 3 },
                                { text: "Permitir que la instituci√≥n educativa gestione todos los aspectos de privacidad", value: 2 }
                            ]
                        },
                        {
                            id: 9,
                            text: "¬øQu√© enfoque considera m√°s √©tico para evaluar el trabajo estudiantil cuando se sospecha uso de IA?",
                            type: "radio",
                            options: [
                                { text: "Usar detectores de IA y aplicar consecuencias seg√∫n los resultados", value: 2 },
                                { text: "Conversar con el estudiante sobre el proceso de creaci√≥n del trabajo", value: 5 },
                                { text: "Cambiar a evaluaciones orales para evitar el uso de IA escrita", value: 3 },
                                { text: "Aceptar el uso de IA si se cita apropiadamente como herramienta", value: 4 },
                                { text: "Ignorar la posibilidad y evaluar solo el contenido final", value: 1 }
                            ]
                        },
                        {
                            id: 10,
                            text: "¬øC√≥mo abordar√≠a la ense√±anza sobre el uso √©tico de IA a sus estudiantes?",
                            type: "radio",
                            options: [
                                { text: "Establecer reglas claras sobre cu√°ndo est√° permitido usar IA", value: 3 },
                                { text: "Explorar dilemas √©ticos reales y analizar diferentes perspectivas", value: 5 },
                                { text: "Ense√±ar principalmente sobre los riesgos y limitaciones de la IA", value: 2 },
                                { text: "Mostrar ejemplos de usos apropiados e inapropiados", value: 4 },
                                { text: "Enfocarse en las implicaciones legales del uso indebido", value: 1 }
                            ]
                        },
                        {
                            id: 11,
                            text: "¬øQu√© principio √©tico considera m√°s importante al implementar IA en actividades de aprendizaje?",
                            type: "radio",
                            options: [
                                { text: "Transparencia sobre c√≥mo la IA influye en las decisiones educativas", value: 4 },
                                { text: "Equidad en el acceso y beneficios para todos los estudiantes", value: 5 },
                                { text: "Eficacia en mejorar los resultados de aprendizaje", value: 2 },
                                { text: "Autonom√≠a para que estudiantes elijan su nivel de uso de IA", value: 3 },
                                { text: "Seguridad en la protecci√≥n de datos e informaci√≥n personal", value: 1 }
                            ]
                        },
                        {
                            id: 12,
                            text: "¬øC√≥mo evaluar√≠a la confiabilidad √©tica de una nueva herramienta de IA educativa?",
                            type: "radio",
                            options: [
                                { text: "Revisar las credenciales y reputaci√≥n de la empresa desarrolladora", value: 2 },
                                { text: "Probar la herramienta con un grupo peque√±o y evaluar resultados", value: 3 },
                                { text: "Analizar la transparencia sobre algoritmos, datos y posibles sesgos", value: 5 },
                                { text: "Consultar rese√±as y experiencias de otros educadores", value: 4 },
                                { text: "Verificar el cumplimiento con regulaciones locales de privacidad", value: 1 }
                            ]
                        }
                    ]
                },
                {
                    title: "Fundamentos y Aplicaciones de IA",
                    questions: [
                        {
                            id: 13,
                            text: "¬øCu√°l describe mejor su comprensi√≥n actual sobre c√≥mo funcionan los sistemas de IA generativa?",
                            type: "radio",
                            options: [
                                { text: "Procesan patrones en grandes datasets para generar respuestas probabil√≠sticas", value: 5 },
                                { text: "Acceden a bases de datos para encontrar y combinar informaci√≥n relevante", value: 2 },
                                { text: "Utilizan reglas programadas para generar respuestas apropiadas", value: 1 },
                                { text: "Imitan el razonamiento humano mediante algoritmos complejos", value: 3 },
                                { text: "Combinan m√∫ltiples fuentes de informaci√≥n usando l√≥gica avanzada", value: 4 }
                            ]
                        },
                        {
                            id: 14,
                            text: "¬øQu√© limitaci√≥n de la IA actual considera m√°s importante que los educadores comprendan?",
                            type: "radio",
                            options: [
                                { text: "Pueden generar informaci√≥n que parece correcta pero es inexacta", value: 5 },
                                { text: "Requieren mucha energ√≠a computacional para funcionar", value: 1 },
                                { text: "No pueden adaptarse a contextos culturales espec√≠ficos", value: 3 },
                                { text: "Su rendimiento var√≠a seg√∫n la calidad de los datos de entrenamiento", value: 4 },
                                { text: "Tienen dificultades con tareas que requieren creatividad genuina", value: 2 }
                            ]
                        },
                        {
                            id: 15,
                            text: "¬øCon qu√© frecuencia considera necesario validar o verificar los resultados de herramientas de IA?",
                            type: "radio",
                            options: [
                                { text: "Siempre, especialmente para contenido que ser√° compartido con estudiantes", value: 5 },
                                { text: "Regularmente, enfoc√°ndose en informaci√≥n factual o t√©cnica", value: 4 },
                                { text: "Ocasionalmente, cuando los resultados parecen inusuales", value: 2 },
                                { text: "Seg√∫n el tipo de herramienta y su reputaci√≥n establecida", value: 3 },
                                { text: "Raramente, confiando en la calidad general de las herramientas establecidas", value: 1 }
                            ]
                        },
                        {
                            id: 16,
                            text: "¬øCu√°l describe mejor su nivel actual de experiencia con herramientas de IA?",
                            type: "radio",
                            options: [
                                { text: "Uso regular con comprensi√≥n de limitaciones y mejores pr√°cticas", value: 5 },
                                { text: "Uso ocasional para tareas espec√≠ficas con resultados satisfactorios", value: 4 },
                                { text: "Experimentaci√≥n inicial con resultados mixtos", value: 3 },
                                { text: "Conocimiento te√≥rico pero poca experiencia pr√°ctica", value: 2 },
                                { text: "Inter√©s en aprender pero sin experiencia directa", value: 1 }
                            ]
                        },
                        {
                            id: 17,
                            text: "¬øQu√© estrategia utiliza para mantenerse actualizado sobre avances en IA educativa?",
                            type: "radio",
                            options: [
                                { text: "Participo en comunidades profesionales y sigo investigaci√≥n especializada", value: 5 },
                                { text: "Leo art√≠culos y blogs de fuentes educativas confiables regularmente", value: 4 },
                                { text: "Asisto a talleres o webinars cuando est√°n disponibles", value: 3 },
                                { text: "Reviso ocasionalmente noticias generales sobre avances tecnol√≥gicos", value: 2 },
                                { text: "Dependo de informaci√≥n compartida por colegas o la instituci√≥n", value: 1 }
                            ]
                        },
                        {
                            id: 18,
                            text: "¬øC√≥mo evaluar√≠a su confianza para determinar cu√°ndo una herramienta de IA es apropiada para una tarea educativa espec√≠fica?",
                            type: "radio",
                            options: [
                                { text: "Alta confianza basada en criterios claros y experiencia pr√°ctica", value: 5 },
                                { text: "Confianza moderada con tendencia a consultar con colegas", value: 4 },
                                { text: "Confianza b√°sica pero prefiero seguir recomendaciones establecidas", value: 3 },
                                { text: "Poca confianza, necesito m√°s experiencia y orientaci√≥n", value: 2 },
                                { text: "Muy poca confianza, evito tomar decisiones independientes", value: 1 }
                            ]
                        }
                    ]
                },
                {
                    title: "Pedagog√≠a con IA",
                    questions: [
                        {
                            id: 19,
                            text: "¬øCu√°l considera el enfoque m√°s efectivo para integrar IA en el dise√±o curricular?",
                            type: "radio",
                            options: [
                                { text: "Identificar objetivos de aprendizaje donde la IA agregue valor pedag√≥gico espec√≠fico", value: 5 },
                                { text: "Reemplazar gradualmente actividades tradicionales con alternativas basadas en IA", value: 2 },
                                { text: "Usar IA como complemento opcional para estudiantes que muestren inter√©s", value: 3 },
                                { text: "Integrar IA en todas las actividades para familiarizar a los estudiantes", value: 1 },
                                { text: "Enfocar el uso de IA en materias t√©cnicas donde es m√°s relevante", value: 4 }
                            ]
                        },
                        {
                            id: 20,
                            text: "¬øC√≥mo abordar√≠a la personalizaci√≥n del aprendizaje usando herramientas de IA?",
                            type: "radio",
                            options: [
                                { text: "Combinar datos de IA con observaci√≥n docente para adaptar estrategias", value: 5 },
                                { text: "Permitir que la IA ajuste autom√°ticamente la dificultad seg√∫n el rendimiento", value: 3 },
                                { text: "Usar IA para agrupar estudiantes con necesidades similares", value: 4 },
                                { text: "Aplicar recomendaciones de IA solo despu√©s de validaci√≥n manual", value: 2 },
                                { text: "Mantener enfoques tradicionales pero usar IA para monitoreo", value: 1 }
                            ]
                        },
                        {
                            id: 21,
                            text: "¬øQu√© rol deber√≠a tener la IA en la evaluaci√≥n del aprendizaje estudiantil?",
                            type: "radio",
                            options: [
                                { text: "Asistir en la generaci√≥n de r√∫bricas y an√°lisis de patrones de respuesta", value: 5 },
                                { text: "Automatizar la calificaci√≥n de respuestas objetivas solamente", value: 3 },
                                { text: "Proporcionar retroalimentaci√≥n preliminar sujeta a revisi√≥n docente", value: 4 },
                                { text: "Limitarse a funciones administrativas como registro de calificaciones", value: 2 },
                                { text: "Evitar su uso en evaluaci√≥n para mantener objetividad humana", value: 1 }
                            ]
                        },
                        {
                            id: 22,
                            text: "¬øC√≥mo manejar√≠a las diferencias en habilidades tecnol√≥gicas de sus estudiantes al usar IA?",
                            type: "radio",
                            options: [
                                { text: "Dise√±ar actividades escalonadas que permitan diferentes niveles de interacci√≥n", value: 5 },
                                { text: "Proporcionar entrenamiento b√°sico en IA antes de implementar actividades", value: 4 },
                                { text: "Emparejar estudiantes con diferentes niveles de habilidad tecnol√≥gica", value: 3 },
                                { text: "Ofrecer opciones alternativas para estudiantes menos c√≥modos con tecnolog√≠a", value: 2 },
                                { text: "Enfocarse en herramientas muy simples que todos puedan usar", value: 1 }
                            ]
                        },
                        {
                            id: 23,
                            text: "¬øCu√°l ser√≠a su enfoque si un estudiante presenta trabajo que claramente utiliz√≥ IA de manera inapropiada?",
                            type: "radio",
                            options: [
                                { text: "Usar la situaci√≥n como oportunidad de aprendizaje sobre uso √©tico de IA", value: 5 },
                                { text: "Aplicar las pol√≠ticas establecidas pero con enfoque educativo", value: 4 },
                                { text: "Requerir que el estudiante rehaga el trabajo sin usar IA", value: 3 },
                                { text: "Evaluar el trabajo por su calidad independientemente del proceso", value: 1 },
                                { text: "Derivar la situaci√≥n a coordinaci√≥n acad√©mica seg√∫n protocolo", value: 2 }
                            ]
                        },
                        {
                            id: 24,
                            text: "¬øC√≥mo ve el futuro de la relaci√≥n entre docentes y tecnolog√≠a de IA en los pr√≥ximos a√±os?",
                            type: "radio",
                            options: [
                                { text: "Colaboraci√≥n donde IA potencia capacidades docentes sin reemplazarlas", value: 5 },
                                { text: "Especializaci√≥n donde docentes se enfocan en habilidades √∫nicamente humanas", value: 4 },
                                { text: "Adaptaci√≥n gradual con cambios menores en pr√°cticas existentes", value: 2 },
                                { text: "Transformaci√≥n significativa de m√©todos de ense√±anza tradicionales", value: 3 },
                                { text: "Incertidumbre que requiere planificaci√≥n flexible y experimental", value: 1 }
                            ]
                        }
                    ]
                },
                {
                    title: "IA para Desarrollo Profesional",
                    questions: [
                        {
                            id: 25,
                            text: "¬øC√≥mo podr√≠a la IA contribuir m√°s efectivamente a su crecimiento profesional continuo?",
                            type: "radio",
                            options: [
                                { text: "Analizar mi pr√°ctica docente y sugerir √°reas espec√≠ficas de mejora", value: 5 },
                                { text: "Proporcionar recursos de aprendizaje personalizados seg√∫n mis necesidades", value: 4 },
                                { text: "Conectarme con otros educadores que enfrentan desaf√≠os similares", value: 3 },
                                { text: "Automatizar tareas administrativas para dedicar m√°s tiempo al desarrollo", value: 2 },
                                { text: "Mantenerme informado sobre tendencias y cambios en educaci√≥n", value: 1 }
                            ]
                        },
                        {
                            id: 26,
                            text: "¬øQu√© nivel de motivaci√≥n siente para integrar IA en su pr√°ctica profesional futura?",
                            type: "radio",
                            options: [
                                { text: "Alta motivaci√≥n con planes espec√≠ficos para experimentar e implementar", value: 5 },
                                { text: "Motivaci√≥n considerable pero condicionada a recibir capacitaci√≥n adecuada", value: 4 },
                                { text: "Inter√©s moderado dependiendo de resultados observados en otros", value: 3 },
                                { text: "Cierta curiosidad pero preocupaci√≥n por complejidad o tiempo requerido", value: 2 },
                                { text: "Motivaci√≥n limitada prefiriendo mantener enfoques actuales", value: 1 }
                            ]
                        },
                        {
                            id: 27,
                            text: "¬øC√≥mo prefiere abordar el aprendizaje colaborativo sobre IA con colegas?",
                            type: "radio",
                            options: [
                                { text: "Participar en comunidades de pr√°ctica con experimentaci√≥n conjunta", value: 5 },
                                { text: "Organizar sesiones regulares de intercambio de experiencias", value: 4 },
                                { text: "Colaborar en proyectos espec√≠ficos que involucren uso de IA", value: 3 },
                                { text: "Asistir a presentaciones donde colegas comparten sus experiencias", value: 2 },
                                { text: "Preferir aprendizaje individual con consultas ocasionales", value: 1 }
                            ]
                        },
                        {
                            id: 28,
                            text: "¬øCu√°l considera su responsabilidad principal al ense√±ar a estudiantes sobre IA?",
                            type: "radio",
                            options: [
                                { text: "Desarrollar pensamiento cr√≠tico sobre beneficios, riesgos e implicaciones sociales", value: 5 },
                                { text: "Ense√±ar uso responsable y √©tico en contextos acad√©micos y profesionales", value: 4 },
                                { text: "Proporcionar conocimientos b√°sicos sobre funcionamiento y aplicaciones", value: 3 },
                                { text: "Demostrar aplicaciones pr√°cticas relevantes para su √°rea de estudio", value: 2 },
                                { text: "Enfocarse en habilidades t√©cnicas para usar herramientas espec√≠ficas", value: 1 }
                            ]
                        },
                        {
                            id: 29,
                            text: "¬øQu√© importancia asigna a ense√±ar a los estudiantes a reconocer contenido generado por IA?",
                            type: "radio",
                            options: [
                                { text: "Cr√≠tica para desarrollar alfabetizaci√≥n digital y pensamiento cr√≠tico", value: 5 },
                                { text: "Importante para contextos acad√©micos y evaluaci√≥n de fuentes", value: 4 },
                                { text: "√ötil como parte de educaci√≥n general sobre tecnolog√≠a", value: 3 },
                                { text: "Moderadamente importante, dependiendo de la materia ense√±ada", value: 2 },
                                { text: "Menos prioritario comparado con otros aspectos de alfabetizaci√≥n digital", value: 1 }
                            ]
                        },
                        {
                            id: 30,
                            text: "¬øQu√© √°rea considera m√°s crucial para su desarrollo profesional inmediato en IA educativa?",
                            type: "radio",
                            options: [
                                { text: "Integraci√≥n pedag√≥gica efectiva alineada con objetivos de aprendizaje", value: 5 },
                                { text: "Comprensi√≥n profunda de principios √©ticos y uso responsable", value: 4 },
                                { text: "Conocimientos t√©cnicos sobre funcionamiento y capacidades de IA", value: 3 },
                                { text: "Habilidades pr√°cticas para evaluar y seleccionar herramientas apropiadas", value: 2 },
                                { text: "Desarrollo equilibrado en todas las √°reas mencionadas", value: 1 }
                            ]
                        }
                    ]
                }
            ]
        };

        // Variables del estado del test
        let currentSectionIndex = 0;
        let responses = {};
        let totalQuestions = 30;

        function startTest() {
            document.getElementById('intro-page').classList.add('hidden');
            document.getElementById('test-page').classList.remove('hidden');
            renderCurrentSection();
            updateProgress();
        }

        function renderCurrentSection() {
            const section = testData.sections[currentSectionIndex];
            const container = document.getElementById('current-section');
            
            let html = `<div class="section-header">${section.title}</div>`;
            
            section.questions.forEach(question => {
                html += `<div class="question">`;
                html += `<h3>${question.id}. ${question.text}</h3>`;
                
                html += `<div class="options">`;
                question.options.forEach((option, index) => {
                    const isSelected = responses[question.id] === option.value;
                    html += `
                        <div class="option ${isSelected ? 'selected' : ''}" onclick="selectOption(${question.id}, ${option.value}, this)">
                            <input type="radio" name="q${question.id}" value="${option.value}" ${isSelected ? 'checked' : ''}>
                            ${option.text}
                        </div>
                    `;
                });
                html += `</div>`;
                
                html += `</div>`;
            });
            
            container.innerHTML = html;
            
            // Actualizar indicador de secci√≥n
            document.getElementById('section-indicator').textContent = `Secci√≥n ${currentSectionIndex + 1} de ${testData.sections.length}`;
            
            // Actualizar botones
            document.getElementById('prev-btn').style.visibility = currentSectionIndex === 0 ? 'hidden' : 'visible';
            const nextBtn = document.getElementById('next-btn');
            if (currentSectionIndex === testData.sections.length - 1) {
                nextBtn.textContent = 'Ver Resultados';
            } else {
                nextBtn.textContent = 'Siguiente';
            }
        }

        function selectOption(questionId, value, element) {
            responses[questionId] = value;
            
            // Remover selecci√≥n anterior
            const options = element.parentNode.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Agregar selecci√≥n actual
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            
            updateProgress();
        }

        function updateProgress() {
            const answeredQuestions = Object.keys(responses).length;
            const progressPercentage = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progress-fill').style.width = progressPercentage + '%';
        }

        function previousSection() {
            if (currentSectionIndex > 0) {
                currentSectionIndex--;
                renderCurrentSection();
            }
        }

        function nextSection() {
            if (currentSectionIndex < testData.sections.length - 1) {
                currentSectionIndex++;
                renderCurrentSection();
            } else {
                showResults();
            }
        }

        function calculateScores() {
            const dimensionScores = {
                humanCentered: { 
                    score: 0, 
                    max: 30, 
                    questions: [1, 2, 3, 4, 5, 6],
                    name: "Mentalidad Centrada en el Ser Humano",
                    description: "Esta dimensi√≥n eval√∫a su comprensi√≥n sobre la agencia humana, responsabilidad social y valores human√≠sticos en el uso de IA. Incluye aspectos como mantener el control humano, entender el impacto social de la IA y asumir responsabilidades como ciudadano digital."
                },
                ethics: { 
                    score: 0, 
                    max: 30, 
                    questions: [7, 8, 9, 10, 11, 12],
                    name: "√âtica de la IA",
                    description: "Mide su conocimiento sobre principios √©ticos fundamentales, uso responsable de datos, identificaci√≥n de sesgos y transparencia. Eval√∫a su capacidad para tomar decisiones √©ticas y promover el uso seguro de tecnolog√≠as de IA."
                },
                foundations: { 
                    score: 0, 
                    max: 30, 
                    questions: [13, 14, 15, 16, 17, 18],
                    name: "Fundamentos y Aplicaciones de IA",
                    description: "Eval√∫a su comprensi√≥n t√©cnica b√°sica sobre qu√© es la IA, sus limitaciones, y su experiencia pr√°ctica con herramientas. Incluye la capacidad para evaluar la calidad y confiabilidad del contenido generado por IA."
                },
                pedagogy: { 
                    score: 0, 
                    max: 30, 
                    questions: [19, 20, 21, 22, 23, 24],
                    name: "Pedagog√≠a con IA",
                    description: "Mide su capacidad para integrar IA en procesos de ense√±anza y aprendizaje de manera efectiva. Incluye personalizaci√≥n del aprendizaje, evaluaci√≥n responsable, manejo de situaciones complejas y visi√≥n pedag√≥gica del futuro."
                },
                development: { 
                    score: 0, 
                    max: 30, 
                    questions: [25, 26, 27, 28, 29, 30],
                    name: "IA para Desarrollo Profesional",
                    description: "Eval√∫a c√≥mo utiliza o planea utilizar la IA para su crecimiento profesional continuo. Incluye motivaci√≥n para aprender, colaboraci√≥n con colegas, responsabilidad en la ense√±anza sobre IA y desarrollo de competencias profesionales."
                }
            };

            // Calcular puntuaciones por dimensi√≥n
            Object.keys(dimensionScores).forEach(dimension => {
                dimensionScores[dimension].questions.forEach(qId => {
                    if (responses[qId] !== undefined) {
                        dimensionScores[dimension].score += responses[qId];
                    }
                });
            });

            // Calcular puntuaci√≥n total
            const totalScore = Object.values(dimensionScores).reduce((sum, dim) => sum + dim.score, 0);
            const maxScore = Object.values(dimensionScores).reduce((sum, dim) => sum + dim.max, 0);
            const totalPercentage = Math.round((totalScore / maxScore) * 100);

            return { dimensionScores, totalScore, maxScore, totalPercentage };
        }

        function showResults() {
            document.getElementById('test-page').classList.add('hidden');
            document.getElementById('results-page').classList.remove('hidden');
            
            const { dimensionScores, totalScore, maxScore, totalPercentage } = calculateScores();
            
            // Mostrar puntuaci√≥n total
            document.getElementById('total-score').textContent = totalPercentage + '%';
            
            // Determinar nivel y explicaci√≥n expandida (3 p√°rrafos basados en UNESCO)
            let level = '';
            let levelExplanation = '';
            
            if (totalPercentage >= 80) {
                level = 'Avanzado (Crear)';
                levelExplanation = `
                    <p>Usted ha alcanzado el nivel "Crear" del marco de competencias de IA de UNESCO, lo que indica que posee competencias avanzadas para liderar la transformaci√≥n educativa con inteligencia artificial. En este nivel, los docentes est√°n preparados para dise√±ar experiencias de aprendizaje innovadoras y ser agentes de cambio en sus comunidades educativas, demostrando una comprensi√≥n profunda de los principios human√≠sticos y √©ticos que deben guiar la integraci√≥n de IA en la educaci√≥n.</p>
                    
                    <p>Sus competencias le permiten contribuir activamente al desarrollo de pol√≠ticas institucionales sobre IA, liderar iniciativas de formaci√≥n para otros docentes y participar en la co-creaci√≥n de est√°ndares √©ticos para el uso de tecnolog√≠as emergentes. Seg√∫n el marco UNESCO, los docentes en este nivel pueden customizar y modificar herramientas de IA para crear soluciones educativas adaptadas a contextos espec√≠ficos, siempre manteniendo la centralidad del ser humano en los procesos de ense√±anza y aprendizaje.</p>
                    
                    <p>Su nivel avanzado lo posiciona como un profesional capaz de evaluar cr√≠ticamente el impacto de la IA en la educaci√≥n, desarrollar metodolog√≠as pedag√≥gicas transformadoras y contribuir a la construcci√≥n de sociedades inclusivas y sostenibles en la era digital. Esto implica no solo la aplicaci√≥n t√©cnica de herramientas, sino tambi√©n la capacidad de reflexionar sobre las implicaciones sociales, culturales y √©ticas de la IA en la formaci√≥n de ciudadanos digitales responsables.</p>
                `;
            } else if (totalPercentage >= 60) {
                level = 'Intermedio (Profundizar)';
                levelExplanation = `
                    <p>Usted se encuentra en el nivel "Profundizar" del marco de competencias de IA de UNESCO, que representa una etapa de desarrollo intermedio donde ha construido una base s√≥lida de conocimientos y est√° preparado para integrar de manera m√°s sistem√°tica la IA en su pr√°ctica pedag√≥gica. En este nivel, los docentes desarrollan habilidades para utilizar herramientas de IA de manera segura y responsable, siempre manteniendo la responsabilidad humana en las decisiones educativas fundamentales.</p>
                    
                    <p>Sus competencias actuales le permiten dise√±ar estrategias pedag√≥gicas que incorporan IA para personalizar el aprendizaje y mejorar la interacci√≥n con los estudiantes, mientras desarrolla una comprensi√≥n cr√≠tica de las limitaciones y potencialidades de estas tecnolog√≠as. Seg√∫n el marco UNESCO, los docentes en este nivel pueden colaborar efectivamente en proyectos de IA educativa, contribuir al aprendizaje organizacional y participar en la adaptaci√≥n de principios √©ticos a contextos educativos espec√≠ficos.</p>
                    
                    <p>Este nivel implica un equilibrio entre la implementaci√≥n pr√°ctica de herramientas de IA y la reflexi√≥n constante sobre su impacto en el proceso de ense√±anza-aprendizaje. Su desarrollo profesional se caracteriza por la capacidad de evaluar cr√≠ticamente las aplicaciones de IA, fomentar el uso √©tico entre estudiantes y colegas, y contribuir a la construcci√≥n de entornos educativos que aprovechen la tecnolog√≠a para potenciar, no reemplazar, las capacidades humanas fundamentales.</p>
                `;
            } else {
                level = 'B√°sico (Adquirir)';
                levelExplanation = `
                    <p>Usted se encuentra en el nivel "Adquirir" del marco de competencias de IA de UNESCO, que constituye el punto de partida fundamental para desarrollar las capacidades necesarias para integrar de manera √©tica y efectiva la inteligencia artificial en la pr√°ctica educativa. Este nivel se centra en la construcci√≥n de una comprensi√≥n b√°sica pero s√≥lida de qu√© es la IA, c√≥mo funciona y cu√°les son sus implicaciones para la educaci√≥n, siempre desde una perspectiva centrada en el ser humano.</p>
                    
                    <p>En esta etapa inicial, es esencial desarrollar una mentalidad cr√≠tica sobre los beneficios y riesgos de la IA, comprendiendo que estas tecnolog√≠as son herramientas creadas por humanos y que, por tanto, requieren supervisi√≥n y decisi√≥n humana consciente. Seg√∫n el marco UNESCO, los docentes en este nivel aprenden a reconocer y aplicar principios √©ticos b√°sicos, a identificar herramientas de IA apropiadas para contextos educativos espec√≠ficos y a mantener siempre la agencia humana en el centro del proceso educativo.</p>
                    
                    <p>Su desarrollo en este nivel representa una oportunidad valiosa para construir competencias fundamentales que servir√°n como base para un crecimiento profesional continuo. El enfoque est√° en adquirir conocimientos esenciales sobre alfabetizaci√≥n en IA, desarrollar habilidades b√°sicas para evaluar herramientas tecnol√≥gicas y, m√°s importante a√∫n, cultivar los valores y actitudes necesarios para usar la IA de manera que fortalezca, no debilite, el prop√≥sito educativo de formar personas √≠ntegras y ciudadanos responsables.</p>
                `;
            }
            
            document.getElementById('level-indicator').innerHTML = `<h3>Nivel: ${level}</h3>`;
            document.getElementById('level-explanation').innerHTML = `<h4>Explicaci√≥n de su nivel:</h4>${levelExplanation}`;
            
            // Crear gr√°fico
            createChart(dimensionScores);
            
            // Mostrar puntuaciones por dimensi√≥n
            displayDimensionScores(dimensionScores);
            
            // Generar recomendaciones
            generateRecommendations(dimensionScores, totalPercentage);
        }

        function createChart(dimensionScores) {
            const ctx = document.getElementById('competencyChart').getContext('2d');
            
            const labels = Object.values(dimensionScores).map(dim => dim.name);
            const data = Object.values(dimensionScores).map(dim => 
                Math.round((dim.score / dim.max) * 100)
            );
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Sus Competencias (%)',
                        data: data,
                        backgroundColor: 'rgba(93, 92, 222, 0.2)',
                        borderColor: '#5D5CDE',
                        pointBackgroundColor: '#5D5CDE',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#5D5CDE',
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        borderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20,
                                font: {
                                    size: 12
                                }
                            },
                            pointLabels: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 14
                                }
                            }
                        }
                    }
                }
            });
        }

        function displayDimensionScores(dimensionScores) {
            const container = document.getElementById('dimension-scores');
            
            let html = '';
            Object.values(dimensionScores).forEach((dim) => {
                const percentage = Math.round((dim.score / dim.max) * 100);
                let levelText = '';
                if (percentage >= 80) levelText = 'Avanzado';
                else if (percentage >= 60) levelText = 'Intermedio';
                else levelText = 'B√°sico';
                
                html += `
                    <div class="dimension-card">
                        <div class="dimension-name">${dim.name}</div>
                        <div class="dimension-description">${dim.description}</div>
                        <div class="dimension-bar">
                            <div class="dimension-fill" style="width: ${percentage}%"></div>
                        </div>
                        <div><strong>${percentage}%</strong> (${dim.score}/${dim.max} puntos) - <em>Nivel: ${levelText}</em></div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function generateRecommendations(dimensionScores, totalPercentage) {
            // Identificar fortalezas y √°reas de mejora
            const strengths = [];
            const improvements = [];
            
            Object.values(dimensionScores).forEach((dim) => {
                const percentage = Math.round((dim.score / dim.max) * 100);
                if (percentage >= 75) {
                    strengths.push(dim.name);
                } else if (percentage < 60) {
                    improvements.push(dim.name);
                }
            });
            
            // Explicaci√≥n de fortalezas
            let strengthsExplanation = '';
            if (strengths.length > 0) {
                strengthsExplanation = `Sus fortalezas identificadas demuestran √°reas donde ya tiene una comprensi√≥n s√≥lida y puede servir como referente para otros colegas. Estas competencias le permiten liderar iniciativas y compartir conocimiento en estos aspectos espec√≠ficos.`;
            } else {
                strengthsExplanation = `Aunque no se identificaron fortalezas marcadas, esto representa una oportunidad para desarrollar de manera equilibrada todas las competencias de IA educativa, construyendo una base s√≥lida en todos los aspectos.`;
            }
            
            // Explicaci√≥n de √°reas de mejora
            let improvementsExplanation = '';
            if (improvements.length > 0) {
                improvementsExplanation = `Las √°reas identificadas para mejora representan oportunidades de crecimiento profesional que, al ser desarrolladas, potenciar√°n significativamente su capacidad para integrar IA en su pr√°ctica educativa de manera efectiva y responsable.`;
            } else {
                improvementsExplanation = `Su perfil muestra un desarrollo equilibrado en todas las √°reas. Enf√≥quese en mantener estas competencias actualizadas y profundizar en √°reas espec√≠ficas seg√∫n sus intereses y necesidades institucionales.`;
            }
            
            // Mostrar fortalezas
            document.getElementById('strengths-explanation').textContent = strengthsExplanation;
            const strengthsList = document.getElementById('strengths-list');
            if (strengths.length > 0) {
                strengthsList.innerHTML = strengths.map(s => `<li>${s}</li>`).join('');
            } else {
                strengthsList.innerHTML = '<li>Oportunidad para desarrollar fortalezas espec√≠ficas a trav√©s del aprendizaje continuo</li>';
            }
            
            // Mostrar √°reas de mejora
            document.getElementById('improvements-explanation').textContent = improvementsExplanation;
            const improvementsList = document.getElementById('improvements-list');
            if (improvements.length > 0) {
                improvementsList.innerHTML = improvements.map(i => `<li>${i}</li>`).join('');
            } else {
                improvementsList.innerHTML = '<li>Mantener y profundizar las competencias actuales en todas las √°reas</li>';
            }
            
            // Recomendaciones con explicaciones detalladas
            generateDetailedRecommendations(totalPercentage);
        }

        function generateDetailedRecommendations(totalPercentage) {
            // Recomendaciones inmediatas
            const immediateExp = document.getElementById('immediate-explanation');
            const immediateRec = document.getElementById('immediate-rec');
            let immediateRecommendations = [];
            let immediateExplanation = '';
            
            if (totalPercentage < 40) {
                immediateExplanation = 'En esta etapa inicial, es fundamental construir una base s√≥lida de conocimientos y familiarizarse con conceptos b√°sicos de IA antes de avanzar a aplicaciones m√°s complejas.';
                immediateRecommendations = [
                    'Completar el curso gratuito "AI for Teachers" de UNESCO',
                    'Explorar herramientas b√°sicas como ChatGPT con fines educativos supervisados',
                    'Leer gu√≠as b√°sicas sobre √©tica en IA educativa',
                    'Unirse a comunidades online de educadores interesados en IA',
                    'Experimentar con traductores autom√°ticos para comprender limitaciones de IA'
                ];
            } else if (totalPercentage < 70) {
                immediateExplanation = 'Con su base de conocimientos actual, puede comenzar a experimentar de manera m√°s estructurada y desarrollar proyectos espec√≠ficos en su √°rea de ense√±anza.';
                immediateRecommendations = [
                    'Implementar un proyecto piloto peque√±o usando IA en una unidad espec√≠fica',
                    'Participar en webinars y talleres sobre IA educativa',
                    'Colaborar con un colega m√°s experimentado en un proyecto de IA',
                    'Evaluar cr√≠ticamente herramientas de IA disponibles para su materia',
                    'Documentar experiencias y resultados de uso de IA en clase'
                ];
            } else {
                immediateExplanation = 'Su nivel avanzado le permite asumir roles de liderazgo y contribuir al desarrollo de la comunidad educativa en competencias de IA.';
                immediateRecommendations = [
                    'Liderar un taller sobre IA para colegas en su instituci√≥n',
                    'Desarrollar pol√≠ticas institucionales para uso √©tico de IA',
                    'Mentorear a docentes principiantes en competencias de IA',
                    'Participar en comit√©s de evaluaci√≥n de herramientas educativas de IA',
                    'Contribuir con art√≠culos o casos de estudio sobre IA educativa'
                ];
            }
            
            immediateExp.textContent = immediateExplanation;
            immediateRec.innerHTML = immediateRecommendations.map(r => `<li>${r}</li>`).join('');
            
            // Recomendaciones mediano plazo
            const mediumExp = document.getElementById('medium-explanation');
            const mediumRec = document.getElementById('medium-rec');
            let mediumRecommendations = [];
            let mediumExplanation = '';
            
            if (totalPercentage < 40) {
                mediumExplanation = 'Una vez establecida la base, podr√° comenzar a aplicar conocimientos de manera pr√°ctica y desarrollar competencias espec√≠ficas en su √°rea de ense√±anza.';
                mediumRecommendations = [
                    'Completar un curso formal sobre integraci√≥n de IA en educaci√≥n',
                    'Desarrollar un proyecto de aula que integre IA de manera sistem√°tica',
                    'Participar en una investigaci√≥n-acci√≥n sobre IA educativa',
                    'Obtener certificaci√≥n en una plataforma espec√≠fica de IA educativa',
                    'Crear recursos educativos utilizando herramientas de IA'
                ];
            } else if (totalPercentage < 70) {
                mediumExplanation = 'Su desarrollo intermedio le permite expandir sus competencias hacia √°reas m√°s especializadas y asumir responsabilidades de capacitaci√≥n con otros.';
                mediumRecommendations = [
                    'Especializarse en un √°rea espec√≠fica de IA educativa (evaluaci√≥n, personalizaci√≥n, etc.)',
                    'Capacitar a otros docentes en su instituci√≥n sobre uso de IA',
                    'Colaborar en el dise√±o de programas de formaci√≥n en IA',
                    'Participar en investigaci√≥n sobre efectividad de IA en educaci√≥n',
                    'Desarrollar materiales de capacitaci√≥n para otros educadores'
                ];
            } else {
                mediumExplanation = 'Su pericia le permite contribuir al avance del campo y influir en pol√≠ticas educativas m√°s amplias relacionadas con IA.';
                mediumRecommendations = [
                    'Colaborar con instituciones de investigaci√≥n en proyectos de IA educativa',
                    'Participar en la creaci√≥n de est√°ndares nacionales para IA en educaci√≥n',
                    'Desarrollar programas de formaci√≥n avanzada para educadores',
                    'Consultar para organizaciones educativas sobre implementaci√≥n de IA',
                    'Publicar investigaci√≥n sobre mejores pr√°cticas en IA educativa'
                ];
            }
            
            mediumExp.textContent = mediumExplanation;
            mediumRec.innerHTML = mediumRecommendations.map(r => `<li>${r}</li>`).join('');
            
            // Recomendaciones largo plazo
            const longExp = document.getElementById('long-explanation');
            const longRec = document.getElementById('long-rec');
            let longRecommendations = [];
            let longExplanation = '';
            
            if (totalPercentage < 40) {
                longExplanation = 'A largo plazo, con desarrollo consistente, podr√° convertirse en un referente en IA educativa en su instituci√≥n y comunidad.';
                longRecommendations = [
                    'Convertirse en coordinador de tecnolog√≠a educativa en su instituci√≥n',
                    'Participar en la formulaci√≥n de pol√≠ticas educativas sobre IA',
                    'Liderar investigaci√≥n sobre impacto de IA en aprendizaje estudiantil',
                    'Contribuir al desarrollo de marcos nacionales de competencias digitales',
                    'Establecer redes de colaboraci√≥n internacional en IA educativa'
                ];
            } else if (totalPercentage < 70) {
                longExplanation = 'Su trayectoria de desarrollo le permitir√° influir significativamente en la transformaci√≥n de pr√°cticas educativas con IA.';
                longRecommendations = [
                    'Obtener certificaciones avanzadas o posgrados en IA educativa',
                    'Dirigir centros de innovaci√≥n educativa con enfoque en IA',
                    'Colaborar con empresas tecnol√≥gicas en desarrollo de herramientas educativas',
                    'Participar en organismos internacionales de pol√≠tica educativa',
                    'Desarrollar metodolog√≠as innovadoras de ense√±anza con IA'
                ];
            } else {
                longExplanation = 'Su liderazgo en IA educativa le posiciona para impactar la transformaci√≥n educativa a nivel nacional e internacional.';
                longRecommendations = [
                    'Asumir roles directivos en organismos de pol√≠tica educativa tecnol√≥gica',
                    'Crear empresas o consultor√≠as especializadas en IA educativa',
                    'Dirigir investigaci√≥n de vanguardia sobre futuro de la educaci√≥n con IA',
                    'Influir en marcos internacionales de competencias docentes en IA',
                    'Mentorear la pr√≥xima generaci√≥n de l√≠deres en IA educativa'
                ];
            }
            
            longExp.textContent = longExplanation;
            longRec.innerHTML = longRecommendations.map(r => `<li>${r}</li>`).join('');
        }

        function showLoadingOverlay() {
            const overlay = document.getElementById('loading-overlay');
            overlay.classList.add('show');
        }

        function hideLoadingOverlay() {
            const overlay = document.getElementById('loading-overlay');
            overlay.classList.remove('show');
        }

        async function downloadPDF() {
            // Mostrar overlay de carga correctamente
            showLoadingOverlay();
            
            try {
                // Verificar si las librer√≠as est√°n disponibles
                if (typeof window.jspdf === 'undefined' || typeof html2canvas === 'undefined') {
                    throw new Error('Librer√≠as PDF no disponibles');
                }
                
                const { jsPDF } = window.jspdf;
                const element = document.getElementById('results-content');
                
                // Mostrar header para PDF
                const pdfHeader = document.getElementById('pdf-header');
                pdfHeader.style.display = 'block';
                
                // Preparar el elemento para captura optimizada
                const originalStyles = {
                    position: element.style.position,
                    left: element.style.left,
                    top: element.style.top,
                    background: element.style.background,
                    boxShadow: element.style.boxShadow,
                    borderRadius: element.style.borderRadius,
                    maxWidth: element.style.maxWidth,
                    width: element.style.width,
                    transform: element.style.transform
                };
                
                // Aplicar estilos optimizados para captura
                element.style.position = 'relative';
                element.style.left = '0';
                element.style.top = '0';
                element.style.background = 'white';
                element.style.boxShadow = 'none';
                element.style.borderRadius = '0';
                element.style.maxWidth = 'none';
                element.style.width = '800px';
                element.style.transform = 'none';
                
                // Forzar re-renderizado del gr√°fico
                const chartCanvas = document.getElementById('competencyChart');
                if (chartCanvas && window.Chart) {
                    // Asegurar que el gr√°fico se vea bien en el PDF
                    chartCanvas.style.background = 'white';
                }
                
                // Esperar renderizado completo
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Configuraci√≥n optimizada para html2canvas
                const canvas = await html2canvas(element, {
                    scale: 1.5, // Mejor calidad
                    useCORS: true,
                    allowTaint: false,
                    backgroundColor: '#ffffff',
                    logging: false,
                    width: 800,
                    height: element.scrollHeight,
                    scrollX: 0,
                    scrollY: 0,
                    ignoreElements: (element) => {
                        // Ignorar elementos que puedan causar problemas
                        return element.tagName === 'BUTTON' && element.textContent.includes('Descargar');
                    }
                });
                
                // Restaurar estilos originales inmediatamente
                pdfHeader.style.display = 'none';
                Object.keys(originalStyles).forEach(key => {
                    element.style[key] = originalStyles[key];
                });
                
                // Crear PDF con m√°rgenes adecuados
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                
                // Calcular dimensiones para el PDF
                const imgData = canvas.toDataURL('image/png', 1.0);
                const imgWidth = 190; // Dejar m√°rgenes
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                const pageHeight = 270; // Altura √∫til de p√°gina A4
                let yPosition = 10; // Margen superior
                
                // Si la imagen es m√°s alta que una p√°gina, dividirla
                if (imgHeight > pageHeight) {
                    let remainingHeight = imgHeight;
                    let sourceY = 0;
                    
                    while (remainingHeight > 0) {
                        const heightToAdd = Math.min(remainingHeight, pageHeight);
                        const sourceHeight = (heightToAdd / imgHeight) * canvas.height;
                        
                        // Crear canvas temporal para esta secci√≥n
                        const tempCanvas = document.createElement('canvas');
                        tempCanvas.width = canvas.width;
                        tempCanvas.height = sourceHeight;
                        const tempCtx = tempCanvas.getContext('2d');
                        
                        // Copiar la porci√≥n correspondiente
                        tempCtx.drawImage(canvas, 0, sourceY, canvas.width, sourceHeight, 0, 0, canvas.width, sourceHeight);
                        
                        // Agregar al PDF
                        const tempImgData = tempCanvas.toDataURL('image/png', 1.0);
                        pdf.addImage(tempImgData, 'PNG', 10, yPosition, imgWidth, heightToAdd);
                        
                        remainingHeight -= pageHeight;
                        sourceY += sourceHeight;
                        
                        if (remainingHeight > 0) {
                            pdf.addPage();
                            yPosition = 10;
                        }
                    }
                } else {
                    // La imagen cabe en una p√°gina
                    pdf.addImage(imgData, 'PNG', 10, yPosition, imgWidth, imgHeight);
                }
                
                // Agregar metadatos a todas las p√°ginas
                const totalPages = pdf.internal.getNumberOfPages();
                const currentDate = new Date().toLocaleDateString('es-ES');
                
                for (let i = 1; i <= totalPages; i++) {
                    pdf.setPage(i);
                    pdf.setFontSize(8);
                    pdf.setTextColor(128);
                    pdf.text(`Generado el: ${currentDate} | P√°gina ${i} de ${totalPages}`, 10, 287);
                    pdf.text('Test de Competencias Docentes en IA - Prof. Pedro Figueroa (UNESCO 2024)', 10, 292);
                }
                
                // Descargar PDF
                const fileName = `Informe_Competencias_IA_${currentDate.replace(/\//g, '-')}.pdf`;
                pdf.save(fileName);
                
                console.log('PDF generado exitosamente con contenido visual completo');
                hideLoadingOverlay();
                
            } catch (error) {
                console.error('Error generando PDF visual:', error);
                hideLoadingOverlay();
                
                // Fallback completo con todo el contenido del informe
                try {
                    const { jsPDF } = window.jspdf;
                    const { dimensionScores, totalScore, maxScore, totalPercentage } = calculateScores();
                    
                    const pdf = new jsPDF();
                    let yPosition = 20;
                    const currentDate = new Date().toLocaleDateString('es-ES');
                    
                    // Funci√≥n auxiliar para verificar espacio y agregar p√°gina si es necesario
                    function checkPageSpace(pdf, yPos, requiredSpace) {
                        if (yPos + requiredSpace > 270) {
                            pdf.addPage();
                            return 20;
                        }
                        return yPos;
                    }
                    
                    // Header
                    pdf.setFontSize(18);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('Informe de Competencias Docentes en IA', 20, yPosition);
                    yPosition += 10;
                    
                    pdf.setFontSize(12);
                    pdf.setTextColor(100);
                    pdf.text('Prof. Pedro Figueroa | Basado en Marco UNESCO 2024', 20, yPosition);
                    yPosition += 15;
                    
                    // Informaci√≥n b√°sica
                    pdf.setFontSize(12);
                    pdf.setTextColor(0);
                    pdf.text(`Fecha de evaluaci√≥n: ${currentDate}`, 20, yPosition); yPosition += 8;
                    yPosition += 10;
                    
                    // Resultado principal
                    pdf.setFontSize(16);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('Sus Resultados de Competencias en IA', 20, yPosition); yPosition += 15;
                    
                    pdf.setFontSize(24);
                    pdf.text(`${totalPercentage}%`, 20, yPosition); yPosition += 15;
                    
                    let level = totalPercentage >= 80 ? 'Avanzado (Crear)' : 
                               totalPercentage >= 60 ? 'Intermedio (Profundizar)' : 'B√°sico (Adquirir)';
                    pdf.setFontSize(14);
                    pdf.text(`Nivel: ${level}`, 20, yPosition); yPosition += 20;
                    
                    // Explicaci√≥n del nivel
                    yPosition = checkPageSpace(pdf, yPosition, 40);
                    pdf.setFontSize(12);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('Explicaci√≥n de su nivel:', 20, yPosition); yPosition += 10;
                    
                    pdf.setFontSize(10);
                    pdf.setTextColor(0);
                    let levelExplanationText = '';
                    if (totalPercentage >= 80) {
                        levelExplanationText = 'Usted ha alcanzado el nivel "Crear" del marco de competencias de IA de UNESCO, lo que indica que posee competencias avanzadas para liderar la transformaci√≥n educativa con inteligencia artificial. Sus competencias le permiten contribuir activamente al desarrollo de pol√≠ticas institucionales sobre IA y liderar iniciativas de formaci√≥n. Su nivel avanzado lo posiciona como un profesional capaz de evaluar cr√≠ticamente el impacto de la IA en la educaci√≥n y desarrollar metodolog√≠as pedag√≥gicas transformadoras.';
                    } else if (totalPercentage >= 60) {
                        levelExplanationText = 'Usted se encuentra en el nivel "Profundizar" del marco de competencias de IA de UNESCO, que representa una etapa de desarrollo intermedio donde ha construido una base s√≥lida de conocimientos. Sus competencias actuales le permiten dise√±ar estrategias pedag√≥gicas que incorporan IA para personalizar el aprendizaje. Este nivel implica un equilibrio entre la implementaci√≥n pr√°ctica de herramientas de IA y la reflexi√≥n constante sobre su impacto.';
                    } else {
                        levelExplanationText = 'Usted se encuentra en el nivel "Adquirir" del marco de competencias de IA de UNESCO, que constituye el punto de partida fundamental para desarrollar las capacidades necesarias para integrar de manera √©tica y efectiva la inteligencia artificial en la pr√°ctica educativa. En esta etapa inicial, es esencial desarrollar una mentalidad cr√≠tica sobre los beneficios y riesgos de la IA.';
                    }
                    
                    const levelLines = pdf.splitTextToSize(levelExplanationText, 170);
                    levelLines.forEach(line => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(line, 20, yPosition);
                        yPosition += 5;
                    });
                    yPosition += 10;
                    
                    // An√°lisis Detallado por Aspecto
                    yPosition = checkPageSpace(pdf, yPosition, 30);
                    pdf.setFontSize(14);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('An√°lisis Detallado por Aspecto', 20, yPosition); yPosition += 15;
                    
                    Object.values(dimensionScores).forEach((dim) => {
                        yPosition = checkPageSpace(pdf, yPosition, 25);
                        
                        const percentage = Math.round((dim.score / dim.max) * 100);
                        let dimLevel = percentage >= 80 ? 'Avanzado' : 
                                      percentage >= 60 ? 'Intermedio' : 'B√°sico';
                        
                        pdf.setFontSize(12);
                        pdf.setTextColor(93, 92, 222);
                        pdf.text(dim.name, 20, yPosition); yPosition += 8;
                        
                        pdf.setFontSize(10);
                        pdf.setTextColor(0);
                        pdf.text(`${percentage}% (${dim.score}/${dim.max} puntos) - Nivel: ${dimLevel}`, 20, yPosition); 
                        yPosition += 6;
                        
                        // Descripci√≥n envuelta
                        const descLines = pdf.splitTextToSize(dim.description, 170);
                        descLines.forEach(line => {
                            yPosition = checkPageSpace(pdf, yPosition, 6);
                            pdf.text(line, 20, yPosition);
                            yPosition += 5;
                        });
                        yPosition += 8;
                    });
                    
                    // Identificar fortalezas y √°reas de mejora
                    const strengths = [];
                    const improvements = [];
                    
                    Object.values(dimensionScores).forEach((dim) => {
                        const percentage = Math.round((dim.score / dim.max) * 100);
                        if (percentage >= 75) {
                            strengths.push(dim.name);
                        } else if (percentage < 60) {
                            improvements.push(dim.name);
                        }
                    });
                    
                    // Fortalezas Identificadas
                    yPosition = checkPageSpace(pdf, yPosition, 30);
                    pdf.setFontSize(14);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('Fortalezas Identificadas', 20, yPosition); yPosition += 12;
                    
                    pdf.setFontSize(10);
                    pdf.setTextColor(0);
                    let strengthsExplanation = '';
                    if (strengths.length > 0) {
                        strengthsExplanation = 'Sus fortalezas identificadas demuestran √°reas donde ya tiene una comprensi√≥n s√≥lida y puede servir como referente para otros colegas. Estas competencias le permiten liderar iniciativas y compartir conocimiento en estos aspectos espec√≠ficos.';
                    } else {
                        strengthsExplanation = 'Aunque no se identificaron fortalezas marcadas, esto representa una oportunidad para desarrollar de manera equilibrada todas las competencias de IA educativa, construyendo una base s√≥lida en todos los aspectos.';
                    }
                    
                    const strengthsLines = pdf.splitTextToSize(strengthsExplanation, 170);
                    strengthsLines.forEach(line => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(line, 20, yPosition);
                        yPosition += 5;
                    });
                    yPosition += 5;
                    
                    if (strengths.length > 0) {
                        strengths.forEach(strength => {
                            yPosition = checkPageSpace(pdf, yPosition, 6);
                            pdf.text(`‚Ä¢ ${strength}`, 25, yPosition);
                            yPosition += 6;
                        });
                    } else {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text('‚Ä¢ Oportunidad para desarrollar fortalezas espec√≠ficas a trav√©s del aprendizaje continuo', 25, yPosition);
                        yPosition += 6;
                    }
                    yPosition += 10;
                    
                    // √Åreas de Mejora
                    yPosition = checkPageSpace(pdf, yPosition, 30);
                    pdf.setFontSize(14);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('√Åreas de Mejora', 20, yPosition); yPosition += 12;
                    
                    pdf.setFontSize(10);
                    pdf.setTextColor(0);
                    let improvementsExplanation = '';
                    if (improvements.length > 0) {
                        improvementsExplanation = 'Las √°reas identificadas para mejora representan oportunidades de crecimiento profesional que, al ser desarrolladas, potenciar√°n significativamente su capacidad para integrar IA en su pr√°ctica educativa de manera efectiva y responsable.';
                    } else {
                        improvementsExplanation = 'Su perfil muestra un desarrollo equilibrado en todas las √°reas. Enf√≥quese en mantener estas competencias actualizadas y profundizar en √°reas espec√≠ficas seg√∫n sus intereses y necesidades institucionales.';
                    }
                    
                    const improvementsLines = pdf.splitTextToSize(improvementsExplanation, 170);
                    improvementsLines.forEach(line => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(line, 20, yPosition);
                        yPosition += 5;
                    });
                    yPosition += 5;
                    
                    if (improvements.length > 0) {
                        improvements.forEach(improvement => {
                            yPosition = checkPageSpace(pdf, yPosition, 6);
                            pdf.text(`‚Ä¢ ${improvement}`, 25, yPosition);
                            yPosition += 6;
                        });
                    } else {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text('‚Ä¢ Mantener y profundizar las competencias actuales en todas las √°reas', 25, yPosition);
                        yPosition += 6;
                    }
                    yPosition += 15;
                    
                    // Recomendaciones Inmediatas
                    yPosition = checkPageSpace(pdf, yPosition, 30);
                    pdf.setFontSize(14);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('Recomendaciones Inmediatas (1-3 meses)', 20, yPosition); yPosition += 12;
                    
                    pdf.setFontSize(10);
                    pdf.setTextColor(0);
                    let immediateExplanation = '';
                    let immediateRecommendations = [];
                    
                    if (totalPercentage < 40) {
                        immediateExplanation = 'En esta etapa inicial, es fundamental construir una base s√≥lida de conocimientos y familiarizarse con conceptos b√°sicos de IA antes de avanzar a aplicaciones m√°s complejas.';
                        immediateRecommendations = [
                            'Completar el curso gratuito "AI for Teachers" de UNESCO',
                            'Explorar herramientas b√°sicas como ChatGPT con fines educativos supervisados',
                            'Leer gu√≠as b√°sicas sobre √©tica en IA educativa',
                            'Unirse a comunidades online de educadores interesados en IA',
                            'Experimentar con traductores autom√°ticos para comprender limitaciones de IA'
                        ];
                    } else if (totalPercentage < 70) {
                        immediateExplanation = 'Con su base de conocimientos actual, puede comenzar a experimentar de manera m√°s estructurada y desarrollar proyectos espec√≠ficos en su √°rea de ense√±anza.';
                        immediateRecommendations = [
                            'Implementar un proyecto piloto peque√±o usando IA en una unidad espec√≠fica',
                            'Participar en webinars y talleres sobre IA educativa',
                            'Colaborar con un colega m√°s experimentado en un proyecto de IA',
                            'Evaluar cr√≠ticamente herramientas de IA disponibles para su materia',
                            'Documentar experiencias y resultados de uso de IA en clase'
                        ];
                    } else {
                        immediateExplanation = 'Su nivel avanzado le permite asumir roles de liderazgo y contribuir al desarrollo de la comunidad educativa en competencias de IA.';
                        immediateRecommendations = [
                            'Liderar un taller sobre IA para colegas en su instituci√≥n',
                            'Desarrollar pol√≠ticas institucionales para uso √©tico de IA',
                            'Mentorear a docentes principiantes en competencias de IA',
                            'Participar en comit√©s de evaluaci√≥n de herramientas educativas de IA',
                            'Contribuir con art√≠culos o casos de estudio sobre IA educativa'
                        ];
                    }
                    
                    const immediateLines = pdf.splitTextToSize(immediateExplanation, 170);
                    immediateLines.forEach(line => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(line, 20, yPosition);
                        yPosition += 5;
                    });
                    yPosition += 5;
                    
                    immediateRecommendations.forEach(rec => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(`‚Ä¢ ${rec}`, 25, yPosition);
                        yPosition += 6;
                    });
                    yPosition += 15;
                    
                    // Recomendaciones Mediano Plazo
                    yPosition = checkPageSpace(pdf, yPosition, 30);
                    pdf.setFontSize(14);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('Recomendaciones Mediano Plazo (3-6 meses)', 20, yPosition); yPosition += 12;
                    
                    pdf.setFontSize(10);
                    pdf.setTextColor(0);
                    let mediumExplanation = '';
                    let mediumRecommendations = [];
                    
                    if (totalPercentage < 40) {
                        mediumExplanation = 'Una vez establecida la base, podr√° comenzar a aplicar conocimientos de manera pr√°ctica y desarrollar competencias espec√≠ficas en su √°rea de ense√±anza.';
                        mediumRecommendations = [
                            'Completar un curso formal sobre integraci√≥n de IA en educaci√≥n',
                            'Desarrollar un proyecto de aula que integre IA de manera sistem√°tica',
                            'Participar en una investigaci√≥n-acci√≥n sobre IA educativa',
                            'Obtener certificaci√≥n en una plataforma espec√≠fica de IA educativa',
                            'Crear recursos educativos utilizando herramientas de IA'
                        ];
                    } else if (totalPercentage < 70) {
                        mediumExplanation = 'Su desarrollo intermedio le permite expandir sus competencias hacia √°reas m√°s especializadas y asumir responsabilidades de capacitaci√≥n con otros.';
                        mediumRecommendations = [
                            'Especializarse en un √°rea espec√≠fica de IA educativa (evaluaci√≥n, personalizaci√≥n, etc.)',
                            'Capacitar a otros docentes en su instituci√≥n sobre uso de IA',
                            'Colaborar en el dise√±o de programas de formaci√≥n en IA',
                            'Participar en investigaci√≥n sobre efectividad de IA en educaci√≥n',
                            'Desarrollar materiales de capacitaci√≥n para otros educadores'
                        ];
                    } else {
                        mediumExplanation = 'Su pericia le permite contribuir al avance del campo y influir en pol√≠ticas educativas m√°s amplias relacionadas con IA.';
                        mediumRecommendations = [
                            'Colaborar con instituciones de investigaci√≥n en proyectos de IA educativa',
                            'Participar en la creaci√≥n de est√°ndares nacionales para IA en educaci√≥n',
                            'Desarrollar programas de formaci√≥n avanzada para educadores',
                            'Consultar para organizaciones educativas sobre implementaci√≥n de IA',
                            'Publicar investigaci√≥n sobre mejores pr√°cticas en IA educativa'
                        ];
                    }
                    
                    const mediumLines = pdf.splitTextToSize(mediumExplanation, 170);
                    mediumLines.forEach(line => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(line, 20, yPosition);
                        yPosition += 5;
                    });
                    yPosition += 5;
                    
                    mediumRecommendations.forEach(rec => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(`‚Ä¢ ${rec}`, 25, yPosition);
                        yPosition += 6;
                    });
                    yPosition += 15;
                    
                    // Recomendaciones Largo Plazo
                    yPosition = checkPageSpace(pdf, yPosition, 30);
                    pdf.setFontSize(14);
                    pdf.setTextColor(93, 92, 222);
                    pdf.text('Recomendaciones Largo Plazo (6-12 meses)', 20, yPosition); yPosition += 12;
                    
                    pdf.setFontSize(10);
                    pdf.setTextColor(0);
                    let longExplanation = '';
                    let longRecommendations = [];
                    
                    if (totalPercentage < 40) {
                        longExplanation = 'A largo plazo, con desarrollo consistente, podr√° convertirse en un referente en IA educativa en su instituci√≥n y comunidad.';
                        longRecommendations = [
                            'Convertirse en coordinador de tecnolog√≠a educativa en su instituci√≥n',
                            'Participar en la formulaci√≥n de pol√≠ticas educativas sobre IA',
                            'Liderar investigaci√≥n sobre impacto de IA en aprendizaje estudiantil',
                            'Contribuir al desarrollo de marcos nacionales de competencias digitales',
                            'Establecer redes de colaboraci√≥n internacional en IA educativa'
                        ];
                    } else if (totalPercentage < 70) {
                        longExplanation = 'Su trayectoria de desarrollo le permitir√° influir significativamente en la transformaci√≥n de pr√°cticas educativas con IA.';
                        longRecommendations = [
                            'Obtener certificaciones avanzadas o posgrados en IA educativa',
                            'Dirigir centros de innovaci√≥n educativa con enfoque en IA',
                            'Colaborar con empresas tecnol√≥gicas en desarrollo de herramientas educativas',
                            'Participar en organismos internacionales de pol√≠tica educativa',
                            'Desarrollar metodolog√≠as innovadoras de ense√±anza con IA'
                        ];
                    } else {
                        longExplanation = 'Su liderazgo en IA educativa le posiciona para impactar la transformaci√≥n educativa a nivel nacional e internacional.';
                        longRecommendations = [
                            'Asumir roles directivos en organismos de pol√≠tica educativa tecnol√≥gica',
                            'Crear empresas o consultor√≠as especializadas en IA educativa',
                            'Dirigir investigaci√≥n de vanguardia sobre futuro de la educaci√≥n con IA',
                            'Influir en marcos internacionales de competencias docentes en IA',
                            'Mentorear la pr√≥xima generaci√≥n de l√≠deres en IA educativa'
                        ];
                    }
                    
                    const longLines = pdf.splitTextToSize(longExplanation, 170);
                    longLines.forEach(line => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(line, 20, yPosition);
                        yPosition += 5;
                    });
                    yPosition += 5;
                    
                    longRecommendations.forEach(rec => {
                        yPosition = checkPageSpace(pdf, yPosition, 6);
                        pdf.text(`‚Ä¢ ${rec}`, 25, yPosition);
                        yPosition += 6;
                    });
                    
                    // Pie de p√°gina en todas las p√°ginas
                    const totalPages = pdf.internal.getNumberOfPages();
                    for (let i = 1; i <= totalPages; i++) {
                        pdf.setPage(i);
                        pdf.setFontSize(8);
                        pdf.setTextColor(128);
                        pdf.text(`P√°gina ${i} de ${totalPages} | Generado el: ${currentDate}`, 20, 285);
                    }
                    
                    pdf.save(`Informe_Competencias_IA_${currentDate.replace(/\//g, '-')}.pdf`);
                    
                    alert('Se gener√≥ un PDF textual completo con todo el contenido del informe. Para el informe visual completo, intente nuevamente o use Ctrl+P para imprimir.');
                    
                } catch (fallbackError) {
                    console.error('Error en fallback:', fallbackError);
                    alert('Error al generar el PDF. Use Ctrl+P para imprimir la p√°gina completa.');
                }
            }
        }

        function restartTest() {
            currentSectionIndex = 0;
            responses = {};
            document.getElementById('results-page').classList.add('hidden');
            document.getElementById('intro-page').classList.remove('hidden');
        }
    </script>


</body></html>